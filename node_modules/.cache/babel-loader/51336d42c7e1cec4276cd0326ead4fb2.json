{"ast":null,"code":"import _toConsumableArray from\"/Users/user1/Desktop/temporary/front-end/front-end-nc-news/nc-news-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _classCallCheck from\"/Users/user1/Desktop/temporary/front-end/front-end-nc-news/nc-news-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/user1/Desktop/temporary/front-end/front-end-nc-news/nc-news-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/Users/user1/Desktop/temporary/front-end/front-end-nc-news/nc-news-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/Users/user1/Desktop/temporary/front-end/front-end-nc-news/nc-news-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _inherits from\"/Users/user1/Desktop/temporary/front-end/front-end-nc-news/nc-news-app/node_modules/@babel/runtime/helpers/esm/inherits\";import React from'react';import{getComments,postComment,deleteComment,incrementVotes}from'../API';import CommentBox from'./CommentBox';import CommentCard from'./CommentCard';var CommentsList=/*#__PURE__*/function(_React$Component){_inherits(CommentsList,_React$Component);function CommentsList(){var _getPrototypeOf2;var _this;_classCallCheck(this,CommentsList);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(CommentsList)).call.apply(_getPrototypeOf2,[this].concat(args)));_this.state={comments_list:[],isLoading:true,userName:'tickle122',err:null};_this.fetchComments=function(){var article_id=_this.props.article_id;getComments(article_id).then(function(comments){_this.setState({comments_list:comments,isLoading:false});}).catch(function(err){_this.setState({err:err.response,isLoading:false});});};_this.addComment=function(_ref){var inputValue=_ref.inputValue;postComment(_this.props.article_id,inputValue,_this.props.user).then(function(comment){_this.setState(function(currentState){var newCommentsList=[].concat(_toConsumableArray(currentState.comments_list),[comment]);return{comments_list:newCommentsList};});}).catch(function(err){_this.setState({err:err.response,isLoading:false});});};_this.removeComment=function(event){var comment_id=event.target.value;deleteComment(comment_id).then(function(comment){_this.setState(function(currentState){return{comments_list:[].concat(_toConsumableArray(currentState.comments_list),[comment])};});});};_this.voteUp=function(event){var incrementDirection=event.target.name;var comment_id=event.target.value;incrementVotes(incrementDirection,comment_id);};_this.voteDown=function(event){var incrementDirection=event.target.name;var comment_id=event.target.value;incrementVotes(incrementDirection,comment_id);};return _this;}_createClass(CommentsList,[{key:\"render\",value:function render(){if(this.state.isLoading===true)return React.createElement(\"p\",null,\"Loading....\");if(this.state.err)return React.createElement(\"p\",{id:\"error\"},this.state.err.status,\": No comment found.\");return React.createElement(\"main\",{id:\"comment_section\",key:\"main\"},React.createElement(CommentBox,{user:this.props.user,key:\"comment box\",article_id:this.props.article_id,userName:this.state.userName,addComment:this.addComment}),React.createElement(CommentCard,{key:\"comment card\",user:this.props.user,comments_list:this.state.comments_list,addComment:this.addComment,removeComment:this.removeComment,voteUp:this.voteUp,voteDown:this.voteDown,userName:this.state.userName}),React.createElement(\"br\",null),React.createElement(\"br\",null));}},{key:\"componentDidUpdate\",value:function componentDidUpdate(prevProps,prevState){if(this.state.comments_list[this.state.comments_list.length-1]==='comment deleted')this.fetchComments();if(this.state.comments_list.length!==prevState.comments_list.length)this.fetchComments();if(this.props.article_id!==prevProps.article_id)this.fetchComments();}},{key:\"componentDidMount\",value:function componentDidMount(){this.fetchComments();}}]);return CommentsList;}(React.Component);export default CommentsList;","map":{"version":3,"sources":["/Users/user1/Desktop/temporary/front-end/front-end-nc-news/nc-news-app/src/Components/CommentsList.jsx"],"names":["React","getComments","postComment","deleteComment","incrementVotes","CommentBox","CommentCard","CommentsList","state","comments_list","isLoading","userName","err","fetchComments","article_id","props","then","comments","setState","catch","response","addComment","inputValue","user","comment","currentState","newCommentsList","removeComment","event","comment_id","target","value","voteUp","incrementDirection","name","voteDown","status","prevProps","prevState","length","Component"],"mappings":"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","sourcesContent":["import React from 'react';\nimport { getComments, postComment, deleteComment, incrementVotes } from '../API';\nimport CommentBox from './CommentBox';\nimport CommentCard from './CommentCard';\n\nclass CommentsList extends React.Component {\n\tstate = {\n\t\tcomments_list: [],\n\t\tisLoading: true,\n\t\tuserName: 'tickle122',\n\t\terr: null\n\t};\n\n\trender() {\n\t\tif (this.state.isLoading === true) return <p>Loading....</p>;\n\t\tif (this.state.err) return <p id=\"error\">{this.state.err.status}: No comment found.</p>;\n\t\treturn (\n\t\t\t<main id=\"comment_section\" key=\"main\">\n\t\t\t\t<CommentBox\n\t\t\t\t\tuser={this.props.user}\n\t\t\t\t\tkey=\"comment box\"\n\t\t\t\t\tarticle_id={this.props.article_id}\n\t\t\t\t\tuserName={this.state.userName}\n\t\t\t\t\taddComment={this.addComment}\n\t\t\t\t/>\n\t\t\t\t<CommentCard\n\t\t\t\t\tkey=\"comment card\"\n\t\t\t\t\tuser={this.props.user}\n\t\t\t\t\tcomments_list={this.state.comments_list}\n\t\t\t\t\taddComment={this.addComment}\n\t\t\t\t\tremoveComment={this.removeComment}\n\t\t\t\t\tvoteUp={this.voteUp}\n\t\t\t\t\tvoteDown={this.voteDown}\n\t\t\t\t\tuserName={this.state.userName}\n\t\t\t\t/>\n\t\t\t\t<br />\n\t\t\t\t<br />\n\t\t\t</main>\n\t\t);\n\t}\n\n\tcomponentDidUpdate(prevProps, prevState) {\n\t\tif (this.state.comments_list[this.state.comments_list.length - 1] === 'comment deleted') this.fetchComments();\n\t\tif (this.state.comments_list.length !== prevState.comments_list.length) this.fetchComments();\n\t\tif (this.props.article_id !== prevProps.article_id) this.fetchComments();\n\t}\n\tcomponentDidMount() {\n\t\tthis.fetchComments();\n\t}\n\n\tfetchComments = () => {\n\t\tconst { article_id } = this.props;\n\t\tgetComments(article_id)\n\t\t\t.then((comments) => {\n\t\t\t\tthis.setState({ comments_list: comments, isLoading: false });\n\t\t\t})\n\t\t\t.catch((err) => {\n\t\t\t\tthis.setState({ err: err.response, isLoading: false });\n\t\t\t});\n\t};\n\n\taddComment = ({ inputValue }) => {\n\t\tpostComment(this.props.article_id, inputValue, this.props.user)\n\t\t\t.then((comment) => {\n\t\t\t\tthis.setState((currentState) => {\n\t\t\t\t\tconst newCommentsList = [ ...currentState.comments_list, comment ];\n\t\t\t\t\treturn { comments_list: newCommentsList };\n\t\t\t\t});\n\t\t\t})\n\t\t\t.catch((err) => {\n\t\t\t\tthis.setState({ err: err.response, isLoading: false });\n\t\t\t});\n\t};\n\n\tremoveComment = (event) => {\n\t\tconst comment_id = event.target.value;\n\t\tdeleteComment(comment_id).then((comment) => {\n\t\t\tthis.setState((currentState) => {\n\t\t\t\treturn { comments_list: [ ...currentState.comments_list, comment ] };\n\t\t\t});\n\t\t});\n\t};\n\tvoteUp = (event) => {\n\t\tconst incrementDirection = event.target.name;\n\t\tconst comment_id = event.target.value;\n\t\tincrementVotes(incrementDirection, comment_id);\n\t};\n\n\tvoteDown = (event) => {\n\t\tconst incrementDirection = event.target.name;\n\t\tconst comment_id = event.target.value;\n\t\tincrementVotes(incrementDirection, comment_id);\n\t};\n}\n\nexport default CommentsList;\n"]},"metadata":{},"sourceType":"module"}